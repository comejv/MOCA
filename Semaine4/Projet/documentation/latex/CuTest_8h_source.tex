\hypertarget{CuTest_8h_source}{}\doxysection{Cu\+Test.\+h}
\label{CuTest_8h_source}\index{auto\_tests/CuTest.h@{auto\_tests/CuTest.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef CU\_TEST\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define CU\_TEST\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <setjmp.h>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <stdarg.h>}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#define CUTEST\_VERSION  "{}CuTest 1.5b"{}}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{comment}{/* CuString */}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keywordtype}{char}* CuStrAlloc(\textcolor{keywordtype}{int} size);}
\DoxyCodeLine{12 \textcolor{keywordtype}{char}* CuStrCopy(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* old);}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#define CU\_ALLOC(TYPE)      ((TYPE*) malloc(sizeof(TYPE)))}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define HUGE\_STRING\_LEN 8192}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define STRING\_MAX      256}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define STRING\_INC      256}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{21 \{}
\DoxyCodeLine{22     \textcolor{keywordtype}{int} length;}
\DoxyCodeLine{23     \textcolor{keywordtype}{int} size;}
\DoxyCodeLine{24     \textcolor{keywordtype}{char}* buffer;}
\DoxyCodeLine{25 \} \mbox{\hyperlink{structCuString}{CuString}};}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keywordtype}{void} CuStringInit(\mbox{\hyperlink{structCuString}{CuString}}* str);}
\DoxyCodeLine{28 \mbox{\hyperlink{structCuString}{CuString}}* CuStringNew(\textcolor{keywordtype}{void});}
\DoxyCodeLine{29 \textcolor{keywordtype}{void} CuStringRead(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* path);}
\DoxyCodeLine{30 \textcolor{keywordtype}{void} CuStringAppend(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* text);}
\DoxyCodeLine{31 \textcolor{keywordtype}{void} CuStringAppendChar(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keywordtype}{char} ch);}
\DoxyCodeLine{32 \textcolor{keywordtype}{void} CuStringAppendFormat(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* format, ...);}
\DoxyCodeLine{33 \textcolor{keywordtype}{void} CuStringInsert(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* text, \textcolor{keywordtype}{int} pos);}
\DoxyCodeLine{34 \textcolor{keywordtype}{void} CuStringResize(\mbox{\hyperlink{structCuString}{CuString}}* str, \textcolor{keywordtype}{int} newSize);}
\DoxyCodeLine{35 \textcolor{keywordtype}{void} CuStringDelete(\mbox{\hyperlink{structCuString}{CuString}}* str);}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{comment}{/* CuTest */}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structCuTest}{CuTest}} \mbox{\hyperlink{structCuTest}{CuTest}};}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{keyword}{typedef} void (*TestFunction)(\mbox{\hyperlink{structCuTest}{CuTest}} *);}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{keyword}{struct }\mbox{\hyperlink{structCuTest}{CuTest}}}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45     \textcolor{keywordtype}{char}* name;}
\DoxyCodeLine{46     TestFunction function;}
\DoxyCodeLine{47     \textcolor{keywordtype}{int} failed;}
\DoxyCodeLine{48     \textcolor{keywordtype}{int} ran;}
\DoxyCodeLine{49     \mbox{\hyperlink{structCuString}{CuString}} *message;}
\DoxyCodeLine{50     jmp\_buf *jumpBuf;}
\DoxyCodeLine{51 \};}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keywordtype}{void} CuTestInit(\mbox{\hyperlink{structCuTest}{CuTest}}* t, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, TestFunction function);}
\DoxyCodeLine{54 \mbox{\hyperlink{structCuTest}{CuTest}}* CuTestNew(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, TestFunction function);}
\DoxyCodeLine{55 \textcolor{keywordtype}{void} CuTestRun(\mbox{\hyperlink{structCuTest}{CuTest}}* tc);}
\DoxyCodeLine{56 \textcolor{keywordtype}{void} CuTestDelete(\mbox{\hyperlink{structCuTest}{CuTest}} *t);}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \textcolor{comment}{/* Internal versions of assert functions -\/-\/ use the public versions */}}
\DoxyCodeLine{59 \textcolor{keywordtype}{void} CuFail\_Line(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message2, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message);}
\DoxyCodeLine{60 \textcolor{keywordtype}{void} CuAssert\_Line(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message, \textcolor{keywordtype}{int} condition);}
\DoxyCodeLine{61 \textcolor{keywordtype}{void} CuAssertStrEquals\_LineMsg(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, }
\DoxyCodeLine{62     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message, }
\DoxyCodeLine{63     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* expected, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* actual);}
\DoxyCodeLine{64 \textcolor{keywordtype}{void} CuAssertIntEquals\_LineMsg(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, }
\DoxyCodeLine{65     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message, }
\DoxyCodeLine{66     \textcolor{keywordtype}{int} expected, \textcolor{keywordtype}{int} actual);}
\DoxyCodeLine{67 \textcolor{keywordtype}{void} CuAssertDblEquals\_LineMsg(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, }
\DoxyCodeLine{68     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message, }
\DoxyCodeLine{69     \textcolor{keywordtype}{double} expected, \textcolor{keywordtype}{double} actual, \textcolor{keywordtype}{double} delta);}
\DoxyCodeLine{70 \textcolor{keywordtype}{void} CuAssertPtrEquals\_LineMsg(\mbox{\hyperlink{structCuTest}{CuTest}}* tc, }
\DoxyCodeLine{71     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* file, \textcolor{keywordtype}{int} line, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* message, }
\DoxyCodeLine{72     \textcolor{keywordtype}{void}* expected, \textcolor{keywordtype}{void}* actual);}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{comment}{/* public assert functions */}}
\DoxyCodeLine{75 }
\DoxyCodeLine{76 \textcolor{preprocessor}{\#define CuFail(tc, ms)                        CuFail\_Line(  (tc), \_\_FILE\_\_, \_\_LINE\_\_, NULL, (ms))}}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#define CuAssert(tc, ms, cond)                CuAssert\_Line((tc), \_\_FILE\_\_, \_\_LINE\_\_, (ms), (cond))}}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#define CuAssertTrue(tc, cond)                CuAssert\_Line((tc), \_\_FILE\_\_, \_\_LINE\_\_, "{}assert failed"{}}, (cond))}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{preprocessor}{\#define CuAssertStrEquals(tc,ex,ac)           CuAssertStrEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,NULL,(ex),(ac))}}
\DoxyCodeLine{81 \textcolor{preprocessor}{\#define CuAssertStrEquals\_Msg(tc,ms,ex,ac)    CuAssertStrEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,(ms),(ex),(ac))}}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#define CuAssertIntEquals(tc,ex,ac)           CuAssertIntEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,NULL,(ex),(ac))}}
\DoxyCodeLine{83 \textcolor{preprocessor}{\#define CuAssertIntEquals\_Msg(tc,ms,ex,ac)    CuAssertIntEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,(ms),(ex),(ac))}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#define CuAssertDblEquals(tc,ex,ac,dl)        CuAssertDblEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,NULL,(ex),(ac),(dl))}}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#define CuAssertDblEquals\_Msg(tc,ms,ex,ac,dl) CuAssertDblEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,(ms),(ex),(ac),(dl))}}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define CuAssertPtrEquals(tc,ex,ac)           CuAssertPtrEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,NULL,(ex),(ac))}}
\DoxyCodeLine{87 \textcolor{preprocessor}{\#define CuAssertPtrEquals\_Msg(tc,ms,ex,ac)    CuAssertPtrEquals\_LineMsg((tc),\_\_FILE\_\_,\_\_LINE\_\_,(ms),(ex),(ac))}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \textcolor{preprocessor}{\#define CuAssertPtrNotNull(tc,p)        CuAssert\_Line((tc),\_\_FILE\_\_,\_\_LINE\_\_,"{}null pointer unexpected"{}},((p) != NULL))}
\DoxyCodeLine{90 \textcolor{preprocessor}{\#define CuAssertPtrNotNullMsg(tc,msg,p) CuAssert\_Line((tc),\_\_FILE\_\_,\_\_LINE\_\_,(msg),((p) != NULL))}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92 \textcolor{comment}{/* CuSuite */}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 \textcolor{preprocessor}{\#define MAX\_TEST\_CASES  1024}}
\DoxyCodeLine{95 }
\DoxyCodeLine{96 \textcolor{preprocessor}{\#define SUITE\_ADD\_TEST(SUITE,TEST)  CuSuiteAdd(SUITE, CuTestNew(\#TEST, TEST))}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{99 \{}
\DoxyCodeLine{100     \textcolor{keywordtype}{int} count;}
\DoxyCodeLine{101     \mbox{\hyperlink{structCuTest}{CuTest}}* list[MAX\_TEST\_CASES];}
\DoxyCodeLine{102     \textcolor{keywordtype}{int} failCount;}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 \} \mbox{\hyperlink{structCuSuite}{CuSuite}};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 }
\DoxyCodeLine{107 \textcolor{keywordtype}{void} CuSuiteInit(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite);}
\DoxyCodeLine{108 \mbox{\hyperlink{structCuSuite}{CuSuite}}* CuSuiteNew(\textcolor{keywordtype}{void});}
\DoxyCodeLine{109 \textcolor{keywordtype}{void} CuSuiteDelete(\mbox{\hyperlink{structCuSuite}{CuSuite}} *testSuite);}
\DoxyCodeLine{110 \textcolor{keywordtype}{void} CuSuiteAdd(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite, \mbox{\hyperlink{structCuTest}{CuTest}} *testCase);}
\DoxyCodeLine{111 \textcolor{keywordtype}{void} CuSuiteAddSuite(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite, \mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite2);}
\DoxyCodeLine{112 \textcolor{keywordtype}{void} CuSuiteRun(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite);}
\DoxyCodeLine{113 \textcolor{keywordtype}{void} CuSuiteSummary(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite, \mbox{\hyperlink{structCuString}{CuString}}* summary);}
\DoxyCodeLine{114 \textcolor{keywordtype}{void} CuSuiteDetails(\mbox{\hyperlink{structCuSuite}{CuSuite}}* testSuite, \mbox{\hyperlink{structCuString}{CuString}}* details);}
\DoxyCodeLine{115 }
\DoxyCodeLine{116 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* CU\_TEST\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
